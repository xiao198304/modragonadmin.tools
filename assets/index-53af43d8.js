import{w as vt,e as ft,d as yt,f as d,m as $t,h as _t,c as wt,g as gt,j as Ct,u as Mt,k as q,o as Dt,l as x,n as T,p as X,q as tt,t as f,F as ut,v as mt,x as et,y as Y,z as b,A as nt,B as N,C as Vt}from"./index-61650aa6.js";import{s as St,m as kt,u as bt,a as it,c as dt}from"./function-call-d42fd7fb.js";vt(St);let ct;const Ot={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let At=ft({},Ot);function Ut(){({instance:ct}=kt({setup(){const{state:y,toggle:O}=bt();return()=>d(_t,$t(y,{"onUpdate:show":O}),null)}}))}function xt(j){return yt?new Promise((y,O)=>{ct||Ut(),ct.open(ft({},At,j,{callback:D=>{(D==="confirm"?y:O)(D)}}))}):Promise.resolve()}const pt=j=>xt(ft({showCancelButton:!0},j));var ht={exports:{}};(function(j,y){(function(O,D){j.exports=D()})(wt,function(){var O=1e3,D=6e4,st=36e5,R="millisecond",A="second",m="minute",I="hour",h="day",E="week",C="month",ot="quarter",S="year",V="date",_="Invalid Date",i=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,k=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,z={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(a){var e=["th","st","nd","rd"],t=a%100;return"["+a+(e[(t-20)%10]||e[t]||e[0])+"]"}},J=function(a,e,t){var s=String(a);return!s||s.length>=e?a:""+Array(e+1-s.length).join(t)+a},F={s:J,z:function(a){var e=-a.utcOffset(),t=Math.abs(e),s=Math.floor(t/60),n=t%60;return(e<=0?"+":"-")+J(s,2,"0")+":"+J(n,2,"0")},m:function a(e,t){if(e.date()<t.date())return-a(t,e);var s=12*(t.year()-e.year())+(t.month()-e.month()),n=e.clone().add(s,C),r=t-n<0,o=e.clone().add(s+(r?-1:1),C);return+(-(s+(t-n)/(r?n-o:o-n))||0)},a:function(a){return a<0?Math.ceil(a)||0:Math.floor(a)},p:function(a){return{M:C,y:S,w:E,d:h,D:V,h:I,m,s:A,ms:R,Q:ot}[a]||String(a||"").toLowerCase().replace(/s$/,"")},u:function(a){return a===void 0}},P="en",B={};B[P]=z;var G=function(a){return a instanceof l},M=function a(e,t,s){var n;if(!e)return P;if(typeof e=="string"){var r=e.toLowerCase();B[r]&&(n=r),t&&(B[r]=t,n=r);var o=e.split("-");if(!n&&o.length>1)return a(o[0])}else{var c=e.name;B[c]=e,n=c}return!s&&n&&(P=n),n||!s&&P},v=function(a,e){if(G(a))return a.clone();var t=typeof e=="object"?e:{};return t.date=a,t.args=arguments,new l(t)},u=F;u.l=M,u.i=G,u.w=function(a,e){return v(a,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var l=function(){function a(t){this.$L=M(t.locale,null,!0),this.parse(t)}var e=a.prototype;return e.parse=function(t){this.$d=function(s){var n=s.date,r=s.utc;if(n===null)return new Date(NaN);if(u.u(n))return new Date;if(n instanceof Date)return new Date(n);if(typeof n=="string"&&!/Z$/i.test(n)){var o=n.match(i);if(o){var c=o[2]-1||0,$=(o[7]||"0").substring(0,3);return r?new Date(Date.UTC(o[1],c,o[3]||1,o[4]||0,o[5]||0,o[6]||0,$)):new Date(o[1],c,o[3]||1,o[4]||0,o[5]||0,o[6]||0,$)}}return new Date(n)}(t),this.$x=t.x||{},this.init()},e.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},e.$utils=function(){return u},e.isValid=function(){return this.$d.toString()!==_},e.isSame=function(t,s){var n=v(t);return this.startOf(s)<=n&&n<=this.endOf(s)},e.isAfter=function(t,s){return v(t)<this.startOf(s)},e.isBefore=function(t,s){return this.endOf(s)<v(t)},e.$g=function(t,s,n){return u.u(t)?this[s]:this.set(n,t)},e.unix=function(){return Math.floor(this.valueOf()/1e3)},e.valueOf=function(){return this.$d.getTime()},e.startOf=function(t,s){var n=this,r=!!u.u(s)||s,o=u.p(t),c=function(Z,g){var W=u.w(n.$u?Date.UTC(n.$y,g,Z):new Date(n.$y,g,Z),n);return r?W:W.endOf(h)},$=function(Z,g){return u.w(n.toDate()[Z].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(g)),n)},p=this.$W,w=this.$M,L=this.$D,H="set"+(this.$u?"UTC":"");switch(o){case S:return r?c(1,0):c(31,11);case C:return r?c(1,w):c(0,w+1);case E:var Q=this.$locale().weekStart||0,K=(p<Q?p+7:p)-Q;return c(r?L-K:L+(6-K),w);case h:case V:return $(H+"Hours",0);case I:return $(H+"Minutes",1);case m:return $(H+"Seconds",2);case A:return $(H+"Milliseconds",3);default:return this.clone()}},e.endOf=function(t){return this.startOf(t,!1)},e.$set=function(t,s){var n,r=u.p(t),o="set"+(this.$u?"UTC":""),c=(n={},n[h]=o+"Date",n[V]=o+"Date",n[C]=o+"Month",n[S]=o+"FullYear",n[I]=o+"Hours",n[m]=o+"Minutes",n[A]=o+"Seconds",n[R]=o+"Milliseconds",n)[r],$=r===h?this.$D+(s-this.$W):s;if(r===C||r===S){var p=this.clone().set(V,1);p.$d[c]($),p.init(),this.$d=p.set(V,Math.min(this.$D,p.daysInMonth())).$d}else c&&this.$d[c]($);return this.init(),this},e.set=function(t,s){return this.clone().$set(t,s)},e.get=function(t){return this[u.p(t)]()},e.add=function(t,s){var n,r=this;t=Number(t);var o=u.p(s),c=function(w){var L=v(r);return u.w(L.date(L.date()+Math.round(w*t)),r)};if(o===C)return this.set(C,this.$M+t);if(o===S)return this.set(S,this.$y+t);if(o===h)return c(1);if(o===E)return c(7);var $=(n={},n[m]=D,n[I]=st,n[A]=O,n)[o]||1,p=this.$d.getTime()+t*$;return u.w(p,this)},e.subtract=function(t,s){return this.add(-1*t,s)},e.format=function(t){var s=this,n=this.$locale();if(!this.isValid())return n.invalidDate||_;var r=t||"YYYY-MM-DDTHH:mm:ssZ",o=u.z(this),c=this.$H,$=this.$m,p=this.$M,w=n.weekdays,L=n.months,H=function(g,W,lt,rt){return g&&(g[W]||g(s,r))||lt[W].slice(0,rt)},Q=function(g){return u.s(c%12||12,g,"0")},K=n.meridiem||function(g,W,lt){var rt=g<12?"AM":"PM";return lt?rt.toLowerCase():rt},Z={YY:String(this.$y).slice(-2),YYYY:this.$y,M:p+1,MM:u.s(p+1,2,"0"),MMM:H(n.monthsShort,p,L,3),MMMM:H(L,p),D:this.$D,DD:u.s(this.$D,2,"0"),d:String(this.$W),dd:H(n.weekdaysMin,this.$W,w,2),ddd:H(n.weekdaysShort,this.$W,w,3),dddd:w[this.$W],H:String(c),HH:u.s(c,2,"0"),h:Q(1),hh:Q(2),a:K(c,$,!0),A:K(c,$,!1),m:String($),mm:u.s($,2,"0"),s:String(this.$s),ss:u.s(this.$s,2,"0"),SSS:u.s(this.$ms,3,"0"),Z:o};return r.replace(k,function(g,W){return W||Z[g]||o.replace(":","")})},e.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},e.diff=function(t,s,n){var r,o=u.p(s),c=v(t),$=(c.utcOffset()-this.utcOffset())*D,p=this-c,w=u.m(this,c);return w=(r={},r[S]=w/12,r[C]=w,r[ot]=w/3,r[E]=(p-$)/6048e5,r[h]=(p-$)/864e5,r[I]=p/st,r[m]=p/D,r[A]=p/O,r)[o]||p,n?w:u.a(w)},e.daysInMonth=function(){return this.endOf(C).$D},e.$locale=function(){return B[this.$L]},e.locale=function(t,s){if(!t)return this.$L;var n=this.clone(),r=M(t,s,!0);return r&&(n.$L=r),n},e.clone=function(){return u.w(this.$d,this)},e.toDate=function(){return new Date(this.valueOf())},e.toJSON=function(){return this.isValid()?this.toISOString():null},e.toISOString=function(){return this.$d.toISOString()},e.toString=function(){return this.$d.toUTCString()},a}(),U=l.prototype;return v.prototype=U,[["$ms",R],["$s",A],["$m",m],["$H",I],["$W",h],["$M",C],["$y",S],["$D",V]].forEach(function(a){U[a[1]]=function(e){return this.$g(e,a[0],a[1])}}),v.extend=function(a,e){return a.$i||(a(e,l,v),a.$i=!0),v},v.locale=M,v.isDayjs=G,v.unix=function(a){return v(1e3*a)},v.en=B[P],v.Ls=B,v.p={},v})})(ht);var Tt=ht.exports;const at=gt(Tt),Nt={key:0,class:"mt-2"},Yt=Y("div",{class:"text-center text-gray-800 mt-3"},"VIP列表",-1),Bt={class:"ml-1 text-gray-500"},Ht={class:"ml-1"},It={class:"text-gray-500 mr-2"},Lt={class:"mb-2 ml-4"},Wt={class:"flex mb-8"},Ft=Ct({__name:"index",setup(j){const y=Mt(),O=q("1"),D=q(!1),st=()=>{D.value=!0},R=q(0),A=q(!1),m=q({address:"",accountCount:10,dayCount:30,amount:100}),I=_=>{R.value=_,m.value.address=y.vipArray[_].address,m.value.accountCount=y.vipArray[_].accountCount,m.value.dayCount=Math.floor((y.vipArray[_].endtimestamp-at().unix())/(60*60*24)),m.value.amount=y.vipArray[_].amount_all,A.value=!0},h=q({address:"",accountCount:10,dayCount:30,amount:100}),E=async()=>{it({duration:0,forbidClick:!0,message:"添加用户中"});let _=at().add(h.value.dayCount,"day").unix();await y.addVip(h.value.address,h.value.accountCount,_,h.value.amount),dt(),await V()},C=async()=>{it({duration:0,forbidClick:!0,message:"用户续费中"});let _=at().add(m.value.dayCount,"day").unix();await y.reNewVip(m.value.address,m.value.accountCount,_,m.value.amount),dt(),await V()};function ot(_){pt({title:"删除账号",message:"是否删除"+y.vipArray[_].address+"?"}).then(async()=>{await y.delVip(y.vipArray[_].address),await V()}).catch(()=>{})}function S(_,i){let k=i==0?"停用账号":"启用账号";pt({title:k,message:"是否"+k+y.vipArray[_].address+"?"}).then(async()=>{await y.setStateVip(y.vipArray[_].address,i),await V()}).catch(()=>{})}Dt(async()=>{await V()});async function V(){it({duration:0,forbidClick:!0,message:"更新数据"}),await y.getVipArray(),dt()}return(_,i)=>{const k=x("van-tag"),z=x("van-col"),J=x("van-row"),F=x("van-button"),P=x("van-collapse-item"),B=x("van-collapse"),G=x("van-divider"),M=x("van-field"),v=x("van-cell-group"),u=x("van-dialog");return T(),X(ut,null,[tt(y).vipArray.length>0?(T(),X("div",Nt,[Yt,d(B,{modelValue:O.value,"onUpdate:modelValue":i[0]||(i[0]=l=>O.value=l),accordion:""},{default:f(()=>[(T(!0),X(ut,null,mt(tt(y).vipArray,(l,U)=>(T(),nt(P,{key:U,name:U+1},{title:f(()=>[d(k,{round:"",plain:"",type:"primary"},{default:f(()=>[b(N(U+1),1)]),_:2},1024),Y("span",Bt,N(tt(Vt)(l.address)),1),d(k,{class:"ml-1",type:"success"},{default:f(()=>[b(N(l.accountCount),1)]),_:2},1024)]),value:f(()=>[l.state==0?(T(),nt(k,{key:0,class:"ml-1",type:"warning"},{default:f(()=>[b("停用")]),_:1})):et("",!0),Y("span",Ht,"有效期："+N(tt(at).unix(l.endtimestamp).format("YYYY/MM/DD")),1)]),default:f(()=>[(T(!0),X(ut,null,mt(l.logs,(a,e)=>(T(),X("div",{class:"ml-2",key:e},[d(J,null,{default:f(()=>[d(z,{span:"12"},{default:f(()=>[Y("span",It,N(e+1),1),Y("span",null,N(tt(at).unix(a.timestamp).format("MM-DDTHH:mm")),1)]),_:2},1024),d(z,{span:"12"},{default:f(()=>[Y("span",null,N(a.ip),1)]),_:2},1024)]),_:2},1024),Y("div",Lt,[a.device.vendor?(T(),nt(k,{key:0,plain:"",type:"primary",class:"mr-2"},{default:f(()=>[b(N(a.device.vendor),1)]),_:2},1024)):et("",!0),d(k,{plain:"",type:"primary",class:"mr-2"},{default:f(()=>[b(N(a.os.name),1)]),_:2},1024),d(k,{plain:"",type:"primary"},{default:f(()=>[b(N(a.browser.name),1)]),_:2},1024)])]))),128)),d(J,{class:"text-center my-2"},{default:f(()=>[d(z,{span:"8"},{default:f(()=>[d(F,{type:"warning",onClick:a=>ot(U),size:"small"},{default:f(()=>[b("删除该账号")]),_:2},1032,["onClick"])]),_:2},1024),d(z,{span:"8"},{default:f(()=>[l.state>0?(T(),nt(F,{key:0,type:"danger",onClick:a=>S(U,0),size:"small"},{default:f(()=>[b("停用账号")]),_:2},1032,["onClick"])):et("",!0),l.state==0?(T(),nt(F,{key:1,type:"danger",onClick:a=>S(U,1),size:"small"},{default:f(()=>[b("启用账号")]),_:2},1032,["onClick"])):et("",!0)]),_:2},1024),d(z,{span:"8"},{default:f(()=>[d(F,{type:"primary",onClick:a=>I(U),size:"small"},{default:f(()=>[b("账号续费")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])])):et("",!0),d(G),Y("div",Wt,[d(F,{icon:"plus",type:"primary",onClick:i[1]||(i[1]=l=>st()),class:"m-auto"},{default:f(()=>[b("添加新账号")]),_:1})]),d(u,{width:"80%",show:D.value,"onUpdate:show":i[6]||(i[6]=l=>D.value=l),title:"添加新账号",onConfirm:E,"close-on-click-overlay":""},{default:f(()=>[Y("div",null,[d(v,{inset:""},{default:f(()=>[d(M,{modelValue:h.value.address,"onUpdate:modelValue":i[2]||(i[2]=l=>h.value.address=l),label:"地址",placeholder:"请输入地址"},null,8,["modelValue"]),d(M,{modelValue:h.value.accountCount,"onUpdate:modelValue":i[3]||(i[3]=l=>h.value.accountCount=l),label:"账号数量",placeholder:"请输入账号数量"},null,8,["modelValue"]),d(M,{modelValue:h.value.dayCount,"onUpdate:modelValue":i[4]||(i[4]=l=>h.value.dayCount=l),label:"天数",placeholder:"请输入天数"},null,8,["modelValue"]),d(M,{modelValue:h.value.amount,"onUpdate:modelValue":i[5]||(i[5]=l=>h.value.amount=l),label:"收费(USDC)",placeholder:"请输入收费(USDC)"},null,8,["modelValue"])]),_:1})])]),_:1},8,["show"]),d(u,{width:"80%",show:A.value,"onUpdate:show":i[11]||(i[11]=l=>A.value=l),title:"账号续费",onConfirm:C,"close-on-click-overlay":""},{default:f(()=>[Y("div",null,[d(v,{inset:""},{default:f(()=>[d(M,{modelValue:m.value.address,"onUpdate:modelValue":i[7]||(i[7]=l=>m.value.address=l),label:"地址",placeholder:"请输入地址"},null,8,["modelValue"]),d(M,{modelValue:m.value.accountCount,"onUpdate:modelValue":i[8]||(i[8]=l=>m.value.accountCount=l),label:"账号数量",placeholder:"请输入账号数量"},null,8,["modelValue"]),d(M,{modelValue:m.value.dayCount,"onUpdate:modelValue":i[9]||(i[9]=l=>m.value.dayCount=l),label:"天数",placeholder:"请输入天数"},null,8,["modelValue"]),d(M,{modelValue:m.value.amount,"onUpdate:modelValue":i[10]||(i[10]=l=>m.value.amount=l),label:"收费(USDC)",placeholder:"请输入收费(USDC)"},null,8,["modelValue"])]),_:1})])]),_:1},8,["show"])],64)}}});export{Ft as default};
